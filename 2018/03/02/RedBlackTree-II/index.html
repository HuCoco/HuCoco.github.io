<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>RedBlackTree_II | HuCoco</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="RedBlackTree II Chinese version address The Last Section Basic operation of red black treesInsertInsert a node into the red-black tree, which steps need to be performed?  think of the red-black tree a">
<meta name="keywords" content="C++,Data Structure,Tree">
<meta property="og:type" content="article">
<meta property="og:title" content="RedBlackTree_II">
<meta property="og:url" content="http://HuCoco.com/2018/03/02/RedBlackTree-II/index.html">
<meta property="og:site_name" content="HuCoco">
<meta property="og:description" content="RedBlackTree II Chinese version address The Last Section Basic operation of red black treesInsertInsert a node into the red-black tree, which steps need to be performed?  think of the red-black tree a">
<meta property="og:image" content="http://hucoco.com/img/RedBlackTree/rbtree.png">
<meta property="og:updated_time" content="2018-03-03T14:24:17.860Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RedBlackTree_II">
<meta name="twitter:description" content="RedBlackTree II Chinese version address The Last Section Basic operation of red black treesInsertInsert a node into the red-black tree, which steps need to be performed?  think of the red-black tree a">
<meta name="twitter:image" content="http://hucoco.com/img/RedBlackTree/rbtree.png">
    

    
        <link rel="alternate" href="/" title="HuCoco" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">HuCoco</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.jpg" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.jpg" />
            <h2 id="name">Hu Ke</h2>
            <h3 id="title">C++ Developer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Chengdu, China</span>
            <a id="follow" target="_blank" href="http://github.com/HuCoco/">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                19
                <span>posts</span>
            </div>
            <div class="article-info-block">
                13
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="http://github.com/HuCoco/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="wechat" class=tooltip>
                            <i class="fa fa-wechat"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-RedBlackTree-II" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            RedBlackTree_II
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2018/03/02/RedBlackTree-II/">
            <time datetime="2018-03-02T15:38:16.000Z" itemprop="datePublished">2018-03-02</time>&nbsp;|&nbsp;
            WORDS:&nbsp;<span class="post-count">1,119</span>&nbsp;|&nbsp;Time: <span class="post-count">7</span>&nbsp;Mins <br>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Data-Structure/">Data Structure</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Data-Structure/Tree/">Tree</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/C/">C++</a>, <a class="tag-link" href="/tags/Data-Structure/">Data Structure</a>, <a class="tag-link" href="/tags/Tree/">Tree</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p><a href="http://hucoco.coding.me/2016/11/09/Tree/RBTree/%E7%BA%A2%E9%BB%91%E6%A0%91%E5%AE%9E%E7%8E%B0%EF%BC%88%E6%B7%BB%E5%8A%A0%E6%93%8D%E4%BD%9C%EF%BC%89/" target="_blank" rel="noopener">RedBlackTree II Chinese version address</a></p>
<p><a href="http://hucoco.com/2018/03/02/RedBlackTree-I/">The Last Section</a></p>
<h2 id="Basic-operation-of-red-black-trees"><a href="#Basic-operation-of-red-black-trees" class="headerlink" title="Basic operation of red black trees"></a>Basic operation of red black trees</h2><h3 id="Insert"><a href="#Insert" class="headerlink" title="Insert"></a>Insert</h3><p>Insert a node into the red-black tree, which steps need to be performed?</p>
<ol>
<li>think of the red-black tree as a binary search tree and insert the node.</li>
<li>Set this node to red.</li>
<li>Modify the tree by rotating and recoloring it to make it a red-black tree again.</li>
</ol>
<a id="more"></a>
<h4 id="Step-Description"><a href="#Step-Description" class="headerlink" title="Step Description"></a>Step Description</h4><h5 id="Step-1"><a href="#Step-1" class="headerlink" title="Step 1"></a>Step 1</h5><p>The red-black tree is a binary search tree, which is still a binary search tree after the node is inserted. This means that the key of the tree is still ordered. In addition, whether it is left-rotation or right-rotation, the tree is a binary search tree before rotation, and after rotation it must be a binary search tree.</p>
<h5 id="Step-2"><a href="#Step-2" class="headerlink" title="Step 2"></a>Step 2</h5><p>Why should set the node’s color to red?</p>
<p>Because it is not violate 5 features. violate more less feature mean less things we need to deal with.</p>
<h5 id="Step-3"><a href="#Step-3" class="headerlink" title="Step 3"></a>Step 3</h5><p>So how many features it violate?</p>
<ol>
<li>As for feature 1, obviously not violate.</li>
<li>As for feature 2, insert operation does not change the root node, so the color of root node is still black.</li>
<li>As for feature 3, leaf node is null node, inserting non-null node does not affect feature.</li>
<li>As for feature 4, Is possible to violate.</li>
</ol>
<h4 id="Case-Description"><a href="#Case-Description" class="headerlink" title="Case Description"></a>Case Description</h4><h5 id="Case-1"><a href="#Case-1" class="headerlink" title="Case 1"></a>Case 1</h5><h6 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h6><p>The current node’s parent node is red, and the current node’s grandparent node’s other child node (uncle node) is also red</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while color[p[z]] = RED                                                  </span><br><span class="line">    do if p[z] = left[p[p[z]]]                                           </span><br><span class="line">          then y ← right[p[p[z]]]                                       </span><br><span class="line">               if color[y] = RED</span><br></pre></td></tr></table></figure>
<p>Grandfather node must exist at this time, otherwise it is not black red tree before inserting. At this point is divided into the parent node is the grandfather’s left child or right child, according to symmetry, we just untie a direction on it. Here only consider the parent node left grandfather’s situation, as shown below.</p>
<p><img src="http://hucoco.com/img/RedBlackTree/insertFix1.png" alt=""></p>
<h6 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h6><p>Strategy is as follows: </p>
<ol>
<li>Sets the parent node to black.</li>
<li>Sets the node of the uncle to black.</li>
<li>set grandfather node to red.</li>
<li>The grandfather node is set as the current node (red node).</li>
</ol>
<p>As shown in the following pseudo code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">then color[p[z]] ← BLACK                  ▹ Case 1   </span><br><span class="line">   color[y] ← BLACK                       ▹ Case 1   </span><br><span class="line">   color[p[p[z]]] ← RED                   ▹ Case 1   </span><br><span class="line">   z ← p[p[z]]                            ▹ Case 1</span><br></pre></td></tr></table></figure>
<p><img src="http://hucoco.com/img/RedBlackTree/insertFix2.png" alt=""></p>
<p>Then, insert repair case 1 translates into insert repair case 2.</p>
<h5 id="Case-2"><a href="#Case-2" class="headerlink" title="Case 2"></a>Case 2</h5><h6 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h6><p>The current node’s parent node is red, the uncle node is black, and the current node is the right child of its parent node</p>
<h6 id="Method-1"><a href="#Method-1" class="headerlink" title="Method"></a>Method</h6><p>Strategy is as follows: </p>
<ol>
<li>Set the parent as the new current node.</li>
<li>Do left rotation on current node.</li>
</ol>
<p>As shown in the following pseudo code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">else if z = right[p[z]]                                </span><br><span class="line">      then z ← p[z]                       ▹ Case 2   </span><br><span class="line">           LEFT-ROTATE(T, z)              ▹ Case 2</span><br></pre></td></tr></table></figure>
<p><img src="http://hucoco.com/img/RedBlackTree/insertFix3.png" alt=""></p>
<p>Insertion Repair Case 2 translates into insert repair case 3.</p>
<h5 id="Case-3"><a href="#Case-3" class="headerlink" title="Case 3"></a>Case 3</h5><h6 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h6><p>The current node’s parent node is red, the uncle node is black, and the current node is the left child of its parent node</p>
<h6 id="Method-2"><a href="#Method-2" class="headerlink" title="Method"></a>Method</h6><p>Strategy is as follows: </p>
<ol>
<li>Sets the parent node to black.</li>
<li>set grandfather node to red.</li>
<li>Do right rotation on grandfather node.</li>
</ol>
<p>As shown in the following pseudo code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">color[p[z]] ← BLACK                 ▹ Case 3   </span><br><span class="line">color[p[p[z]]] ← RED                ▹ Case 3   </span><br><span class="line">RIGHT-ROTATE(T, p[p[z]])            ▹ Case 3</span><br></pre></td></tr></table></figure>
<p><img src="http://hucoco.com/img/RedBlackTree/insertFix4.png" alt=""></p>
<h3 id="Code-Reference"><a href="#Code-Reference" class="headerlink" title="Code Reference"></a>Code Reference</h3><h4 id="Pseudo-code"><a href="#Pseudo-code" class="headerlink" title="Pseudo code:"></a>Pseudo code:</h4><h5 id="Insert-Pseudo-Code"><a href="#Insert-Pseudo-Code" class="headerlink" title="Insert Pseudo Code"></a>Insert Pseudo Code</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">RB-INSERT(T, z)  </span><br><span class="line"> y ← nil[T]                        </span><br><span class="line"> x ← root[T]                       </span><br><span class="line"> while x ≠ nil[T]                  </span><br><span class="line">     do y ← x                      </span><br><span class="line">        if key[z] &lt; key[x]  </span><br><span class="line">           then x ← left[x]  </span><br><span class="line">           else x ← right[x]  </span><br><span class="line"> p[z] ← y                          </span><br><span class="line"> if y = nil[T]                     </span><br><span class="line">    then root[T] ← z               </span><br><span class="line">    else if key[z] &lt; key[y]        </span><br><span class="line">            then left[y] ← z       </span><br><span class="line">            else right[y] ← z       </span><br><span class="line"> left[z] ← nil[T]                  </span><br><span class="line"> right[z] ← nil[T]                 </span><br><span class="line"> color[z] ← RED                    </span><br><span class="line"> RB-INSERT-FIXUP(T, z)</span><br></pre></td></tr></table></figure>
<h5 id="Insert-Fixed-Pseudo-Code"><a href="#Insert-Fixed-Pseudo-Code" class="headerlink" title="Insert-Fixed Pseudo Code"></a>Insert-Fixed Pseudo Code</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">RB-INSERT-FIXUP(T, z)</span><br><span class="line">while color[p[z]] = RED                                                  </span><br><span class="line">    do if p[z] = left[p[p[z]]]                                           </span><br><span class="line">          then y ← right[p[p[z]]]                                       </span><br><span class="line">               if color[y] = RED                                         </span><br><span class="line">                  then color[p[z]] ← BLACK                    ▹ Case 1   </span><br><span class="line">                       color[y] ← BLACK                       ▹ Case 1   </span><br><span class="line">                       color[p[p[z]]] ← RED                   ▹ Case 1   </span><br><span class="line">                       z ← p[p[z]]                            ▹ Case 1   </span><br><span class="line">                  else if z = right[p[z]]                                </span><br><span class="line">                          then z ← p[z]                       ▹ Case 2   </span><br><span class="line">                               LEFT-ROTATE(T, z)              ▹ Case 2   </span><br><span class="line">                          color[p[z]] ← BLACK                 ▹ Case 3   </span><br><span class="line">                          color[p[p[z]]] ← RED                ▹ Case 3   </span><br><span class="line">                          RIGHT-ROTATE(T, p[p[z]])            ▹ Case 3  </span><br><span class="line">       else (same as then clause with &quot;right&quot; and &quot;left&quot; exchanged)      </span><br><span class="line">color[root[T]] ← BLACK</span><br></pre></td></tr></table></figure>
<h4 id="C-Implementation"><a href="#C-Implementation" class="headerlink" title="C++ Implementation"></a>C++ Implementation</h4><h5 id="Insert-C-Code"><a href="#Insert-C-Code" class="headerlink" title="Insert C++ Code"></a>Insert C++ Code</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">template &lt;class T&gt;</span><br><span class="line">bool RedBlackTree&lt;T&gt;::insert(RedBlackNode&lt;T&gt; *&amp;root, RedBlackNode&lt;T&gt; *node) &#123;</span><br><span class="line"></span><br><span class="line">	RedBlackNode&lt;T&gt;* y = nullptr;   </span><br><span class="line">	RedBlackNode&lt;T&gt;* x = root;     </span><br><span class="line"></span><br><span class="line">	while (x != nullptr) &#123;          </span><br><span class="line"></span><br><span class="line">		if(x-&gt;key == node-&gt;key)&#123;    </span><br><span class="line">			return false;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		y = x;                     </span><br><span class="line">		if(node-&gt;key &lt; x-&gt;key) &#123;   </span><br><span class="line">			x = x-&gt;pLeft;           </span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			x = x-&gt;pRight;			</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	node-&gt;pParent = y;				</span><br><span class="line"></span><br><span class="line">	if(y != nullptr) &#123;				</span><br><span class="line">		if(node-&gt;key &lt; y-&gt;key) &#123;	</span><br><span class="line">			y-&gt;pLeft = node;		</span><br><span class="line">		&#125; else &#123;					</span><br><span class="line">			y-&gt;pRight = node;		</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		root = node;				</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	set_red(node);		</span><br><span class="line"></span><br><span class="line">	insertFixUp(root, node);</span><br><span class="line"></span><br><span class="line">	return true;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Insert-Fixed-C-Code"><a href="#Insert-Fixed-C-Code" class="headerlink" title="Insert-Fixed C++ Code"></a>Insert-Fixed C++ Code</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">template &lt;class T&gt;</span><br><span class="line">void RedBlackTree&lt;T&gt;::insertFixUp(RedBlackNode&lt;T&gt; *&amp;root, RedBlackNode&lt;T&gt; *node) &#123;</span><br><span class="line"></span><br><span class="line">	RedBlackNode&lt;T&gt;* parent;</span><br><span class="line">	RedBlackNode&lt;T&gt;* gparnet;</span><br><span class="line"></span><br><span class="line">	while ((parent = get_parent(node))&amp;&amp;(is_red(parent))) &#123;</span><br><span class="line"></span><br><span class="line">		gparnet = get_parent(parent);</span><br><span class="line"></span><br><span class="line">		if(parent == gparnet-&gt;pLeft) &#123;</span><br><span class="line">            RedBlackNode&lt;T&gt;* uncle = gparnet-&gt;pRight;</span><br><span class="line">            if(uncle &amp;&amp; is_red(uncle)) &#123;</span><br><span class="line">                set_black(uncle);</span><br><span class="line">                set_black(parent);</span><br><span class="line">                set_red(gparnet);</span><br><span class="line">                node = gparnet;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line">            if(parent-&gt;pRight == node) &#123;</span><br><span class="line">                RedBlackNode&lt;T&gt;* tmp;</span><br><span class="line">                leftRotate(root, parent);</span><br><span class="line">                tmp = parent;</span><br><span class="line">                parent = node;</span><br><span class="line">                node = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">            set_black(parent);</span><br><span class="line">            set_red(gparnet);</span><br><span class="line">            rightRotate(root, gparnet);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		else &#123;</span><br><span class="line">            RedBlackNode&lt;T&gt;* uncle = gparnet-&gt;pLeft;</span><br><span class="line">            if(uncle &amp;&amp; is_red(uncle)) &#123;</span><br><span class="line">                set_black(uncle);</span><br><span class="line">                set_black(parent);</span><br><span class="line">                set_red(gparnet);</span><br><span class="line">                node = gparnet;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line">            if(parent-&gt;pLeft == node) &#123;</span><br><span class="line">                RedBlackNode&lt;T&gt;* tmp;</span><br><span class="line">                rightRotate(root, parent);</span><br><span class="line">                tmp = parent;</span><br><span class="line">                parent = node;</span><br><span class="line">                node = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">            set_black(parent);</span><br><span class="line">            set_red(gparnet);</span><br><span class="line">            leftRotate(root, gparnet);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	set_black(root);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="http://hucoco.com/2018/03/02/RedBlackTree-II/">The Next Section</a></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://HuCoco.com/2018/03/02/RedBlackTree-II/" data-id="cjjfc3ngk000onsb9mu4xnzwq" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2018/03/02/RedBlackTree-III/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Newer</strong>
            <div class="article-nav-title">
                
                    RedBlackTree_III
                
            </div>
        </a>
    
    
        <a href="/2018/03/02/RedBlackTree-I/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">RedBlackTree I</div>
        </a>
    
</nav>


    
</article>


    
    

</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/07/10/Do-Ray-Tracing/" class="thumbnail">
    
    
        <span style="background-image:url(http://hucoco.com/img/Graphics/RayTracing/DoRayTracing_01.png)" alt="Do Ray Tracing" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Graphics/">Graphics</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Graphics/Ray-Tracing/">Ray Tracing</a></p>
                            <p class="item-title"><a href="/2018/07/10/Do-Ray-Tracing/" class="title">Do Ray Tracing</a></p>
                            <p class="item-date"><time datetime="2018-07-10T05:54:10.000Z" itemprop="datePublished">2018-07-10</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/07/09/Lighting_and_Materials/" class="thumbnail">
    
    
        <span style="background-image:url(http://hucoco.com/img/Graphics/RayTracing/lighting_and_matrials_00.png)" alt="Lighting and Materials" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Graphics/">Graphics</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Graphics/Ray-Tracing/">Ray Tracing</a></p>
                            <p class="item-title"><a href="/2018/07/09/Lighting_and_Materials/" class="title">Lighting and Materials</a></p>
                            <p class="item-date"><time datetime="2018-07-09T12:59:05.000Z" itemprop="datePublished">2018-07-09</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/07/07/Ray-and-Camera/" class="thumbnail">
    
    
        <span style="background-image:url(http://hucoco.com/img/Graphics/RayTracing/ray_00.png)" alt="Ray and Camera" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Graphics/">Graphics</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Graphics/Ray-Tracing/">Ray Tracing</a></p>
                            <p class="item-title"><a href="/2018/07/07/Ray-and-Camera/" class="title">Ray and Camera</a></p>
                            <p class="item-date"><time datetime="2018-07-07T08:08:16.000Z" itemprop="datePublished">2018-07-07</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/07/06/Various-surfaces/" class="thumbnail">
    
    
        <span style="background-image:url(http://hucoco.com/img/Graphics/RayTracing/RayTracing_0.png)" alt="Various surfaces" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Graphics/">Graphics</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Graphics/Ray-Tracing/">Ray Tracing</a></p>
                            <p class="item-title"><a href="/2018/07/06/Various-surfaces/" class="title">Various surfaces</a></p>
                            <p class="item-date"><time datetime="2018-07-06T15:28:40.000Z" itemprop="datePublished">2018-07-06</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/07/05/Theory-of-Ray-Tracing/" class="thumbnail">
    
    
        <span style="background-image:url(http://hucoco.com/img/Graphics/RayTracing/RayTracing_1.png)" alt="Ray Tracing Overview" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Graphics/">Graphics</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Graphics/Ray-Tracing/">Ray Tracing</a></p>
                            <p class="item-title"><a href="/2018/07/05/Theory-of-Ray-Tracing/" class="title">Ray Tracing Overview</a></p>
                            <p class="item-date"><time datetime="2018-07-05T12:09:50.000Z" itemprop="datePublished">2018-07-05</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/Problems/">Problems</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/Search/">Search</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/Sort/">Sort</a><span class="category-list-count">2</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Data-Structure/">Data Structure</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Data-Structure/Graph/">Graph</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Data-Structure/Tree/">Tree</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Graphics/">Graphics</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Graphics/PBR/">PBR</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Graphics/Ray-Tracing/">Ray Tracing</a><span class="category-list-count">6</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/SIMD/">SIMD</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/SIMD/SSE/">SSE</a><span class="category-list-count">1</span></li></ul></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">12</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/">Algorithm</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Backtracking/">Backtracking</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Data-Structure/">Data Structure</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Graph/">Graph</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Graphics/">Graphics</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PBR/">PBR</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ray-Tracing/">Ray Tracing</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SIMD/">SIMD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSE/">SSE</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sort/">Sort</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tree/">Tree</a><span class="tag-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/Algorithm/" style="font-size: 14px;">Algorithm</a> <a href="/tags/Backtracking/" style="font-size: 10px;">Backtracking</a> <a href="/tags/C/" style="font-size: 20px;">C++</a> <a href="/tags/Data-Structure/" style="font-size: 16px;">Data Structure</a> <a href="/tags/Graph/" style="font-size: 16px;">Graph</a> <a href="/tags/Graphics/" style="font-size: 18px;">Graphics</a> <a href="/tags/PBR/" style="font-size: 10px;">PBR</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Ray-Tracing/" style="font-size: 16px;">Ray Tracing</a> <a href="/tags/SIMD/" style="font-size: 10px;">SIMD</a> <a href="/tags/SSE/" style="font-size: 10px;">SSE</a> <a href="/tags/Sort/" style="font-size: 10px;">Sort</a> <a href="/tags/Tree/" style="font-size: 12px;">Tree</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <div class="outer">	
        <div id="footer-info" class="inner">
            &copy; 2018 Hu Ke<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a><br>
            Visited:&nbsp;<span id="busuanzi_container_site_pv"><span id="busuanzi_value_site_pv"></span></span>&nbsp;|&nbsp;Total Words:&nbsp;<span class="post-count">10.4k</span>
        </div>
    </div>
</footer>
        


    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>